5dda9c61546b5f14f046c8a9aff2b116
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.SELECT_CITY = exports.GET_CITY_ERROR = exports.GET_CITIES_FROM_API = undefined;
exports.getCity = getCity;
exports.selectCity = selectCity;

var _api = require('./../middleware/api');

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

var GET_CITIES_FROM_API = exports.GET_CITIES_FROM_API = 'GET_CITIES_FROM_API';
var GET_CITY_ERROR = exports.GET_CITY_ERROR = 'GET_CITIES_ERROR';
var SELECT_CITY = exports.SELECT_CITY = 'SELECT_CITY';

function getCity() {
  return function (dispatch, getState) {
    var selectedCity = getState().Content.get('selectedCity');

    dispatch(_defineProperty({}, _api.CHAIN_API, [function () {
      return _defineProperty({}, _api.CALL_API, {
        method: 'get',
        type: 'external',
        path: '/city/search?limit=10&page=1&term=' + encodeURI(selectedCity),
        successType: GET_CITIES_FROM_API,
        errorType: GET_CITY_ERROR
      });
    }, function () {
      // console.log(payload);
    }]));
  };
}

function selectCity(city) {
  return function (dispatch) {
    dispatch({
      type: SELECT_CITY,
      city: city
    });
    dispatch(getCity());
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImdldENpdHkiLCJzZWxlY3RDaXR5IiwiR0VUX0NJVElFU19GUk9NX0FQSSIsIkdFVF9DSVRZX0VSUk9SIiwiU0VMRUNUX0NJVFkiLCJkaXNwYXRjaCIsImdldFN0YXRlIiwic2VsZWN0ZWRDaXR5IiwiQ29udGVudCIsImdldCIsIm1ldGhvZCIsInR5cGUiLCJwYXRoIiwiZW5jb2RlVVJJIiwic3VjY2Vzc1R5cGUiLCJlcnJvclR5cGUiLCJjaXR5Il0sIm1hcHBpbmdzIjoiOzs7Ozs7UUFNZ0JBLE8sR0FBQUEsTztRQXlCQUMsVSxHQUFBQSxVOztBQS9CaEI7Ozs7QUFFTyxJQUFNQyxvREFBc0IscUJBQTVCO0FBQ0EsSUFBTUMsMENBQWlCLGtCQUF2QjtBQUNBLElBQU1DLG9DQUFjLGFBQXBCOztBQUVBLFNBQVNKLE9BQVQsR0FBbUI7QUFDeEIsU0FBTyxVQUFDSyxRQUFELEVBQVdDLFFBQVgsRUFBd0I7QUFDN0IsUUFBTUMsZUFBZUQsV0FBV0UsT0FBWCxDQUFtQkMsR0FBbkIsQ0FBdUIsY0FBdkIsQ0FBckI7O0FBRUFKLGlEQUNlLENBQ1gsWUFBTTtBQUNKLGdEQUNjO0FBQ1ZLLGdCQUFRLEtBREU7QUFFVkMsY0FBTSxVQUZJO0FBR1ZDLHFEQUEyQ0MsVUFBVU4sWUFBVixDQUhqQztBQUlWTyxxQkFBYVosbUJBSkg7QUFLVmEsbUJBQVdaO0FBTEQsT0FEZDtBQVNELEtBWFUsRUFZWCxZQUFNO0FBQ0o7QUFDRCxLQWRVLENBRGY7QUFrQkQsR0FyQkQ7QUFzQkQ7O0FBRU0sU0FBU0YsVUFBVCxDQUFvQmUsSUFBcEIsRUFBMEI7QUFDL0IsU0FBTyxVQUFDWCxRQUFELEVBQWM7QUFDbkJBLGFBQVM7QUFDUE0sWUFBTVAsV0FEQztBQUVQWTtBQUZPLEtBQVQ7QUFJQVgsYUFBU0wsU0FBVDtBQUNELEdBTkQ7QUFPRCIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q0FMTF9BUEksIENIQUlOX0FQSX0gZnJvbSAnLi8uLi9taWRkbGV3YXJlL2FwaSc7XG5cbmV4cG9ydCBjb25zdCBHRVRfQ0lUSUVTX0ZST01fQVBJID0gJ0dFVF9DSVRJRVNfRlJPTV9BUEknO1xuZXhwb3J0IGNvbnN0IEdFVF9DSVRZX0VSUk9SID0gJ0dFVF9DSVRJRVNfRVJST1InO1xuZXhwb3J0IGNvbnN0IFNFTEVDVF9DSVRZID0gJ1NFTEVDVF9DSVRZJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdldENpdHkoKSB7XG4gIHJldHVybiAoZGlzcGF0Y2gsIGdldFN0YXRlKSA9PiB7XG4gICAgY29uc3Qgc2VsZWN0ZWRDaXR5ID0gZ2V0U3RhdGUoKS5Db250ZW50LmdldCgnc2VsZWN0ZWRDaXR5Jyk7XG5cbiAgICBkaXNwYXRjaCh7XG4gICAgICBbQ0hBSU5fQVBJXTogW1xuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFtDQUxMX0FQSV06IHtcbiAgICAgICAgICAgICAgbWV0aG9kOiAnZ2V0JyxcbiAgICAgICAgICAgICAgdHlwZTogJ2V4dGVybmFsJyxcbiAgICAgICAgICAgICAgcGF0aDogYC9jaXR5L3NlYXJjaD9saW1pdD0xMCZwYWdlPTEmdGVybT0ke2VuY29kZVVSSShzZWxlY3RlZENpdHkpfWAsXG4gICAgICAgICAgICAgIHN1Y2Nlc3NUeXBlOiBHRVRfQ0lUSUVTX0ZST01fQVBJLFxuICAgICAgICAgICAgICBlcnJvclR5cGU6IEdFVF9DSVRZX0VSUk9SXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgKCkgPT4ge1xuICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBheWxvYWQpO1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3RDaXR5KGNpdHkpIHtcbiAgcmV0dXJuIChkaXNwYXRjaCkgPT4ge1xuICAgIGRpc3BhdGNoKHtcbiAgICAgIHR5cGU6IFNFTEVDVF9DSVRZLFxuICAgICAgY2l0eVxuICAgIH0pO1xuICAgIGRpc3BhdGNoKGdldENpdHkoKSk7XG4gIH07XG59XG4iXX0=