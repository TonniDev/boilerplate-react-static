7168082a5244789313b759779a1695f0
'use strict';

var path = require('path');
var webpack = require('webpack');
var StaticSiteGeneratorPlugin = require('static-site-generator-webpack-plugin');
var BrowserSyncPlugin = require('browser-sync-webpack-plugin');
var CleanWebpackPlugin = require('clean-webpack-plugin');
var CopyWebpackPlugin = require('copy-webpack-plugin');

var _require = require('webpack-bundle-analyzer'),
    BundleAnalyzerPlugin = _require.BundleAnalyzerPlugin;

var ss = require('../../src/__static__/ss_routes');

var outputDir = process.env.OUTPUT;

var copyPlugin = function copyPlugin() {
  var copyHTML = [{
    from: process.env.ROOT_PATH + 'src/assets/',
    to: process.env.ROOT_PATH + 'assets/'
  }];
  if (process.env.OUTPUT === 'standard') {
    copyHTML = copyHTML.concat({
      from: process.env.ROOT_PATH + 'src/__' + outputDir + '__/index.html',
      to: '' + process.env.ROOT_PATH
    });
  }
  return copyHTML;
};

var ifDev = function ifDev(arr) {
  var plugins = arr;
  if (process.env.OUTPUT === 'static') {
    var StaticSiteGenerator = new StaticSiteGeneratorPlugin({
      entry: 'main',
      paths: ss.routes
    });
    plugins.splice(2, 0, StaticSiteGenerator);
  }
  if (process.env.NODE_ENV === 'production') {
    var UglyJS = new webpack.optimize.UglifyJsPlugin({
      minimize: true,
      comments: false, // remove comments
      compress: {
        warnings: false, // Suppress uglification warnings
        pure_getters: true,
        conditionals: true,
        sequences: true,
        dead_code: true,
        booleans: true,
        unused: true,
        if_return: true,
        join_vars: true,
        drop_console: true
      },
      mangle: true,
      sourceMap: true, /* fix issue on uglify */
      output: { comments: false }
    });
    var IgnorePlugin = new webpack.IgnorePlugin(/^\.\/locale$/, [/moment$/]);
    var NameModules = new webpack.NamedModulesPlugin();
    var NoEmit = new webpack.NoEmitOnErrorsPlugin();

    plugins.splice(2, 0, UglyJS);
    plugins = plugins.concat(IgnorePlugin, NameModules, NoEmit);
  }
  if (process.env.NODE_ENV === 'development') {
    var BrowserSync = new BrowserSyncPlugin({
      host: 'localhost',
      port: process.env.PORT || 8080,
      server: {
        baseDir: [outputDir + '_build']
      }
    });
    var BundleAnalyser = new BundleAnalyzerPlugin();
    plugins = plugins.concat(BrowserSync, BundleAnalyser);
  }
  return plugins;
};

var initialPlugins = [new CleanWebpackPlugin([outputDir + '_build'], {
  root: path.resolve(__dirname, '../../')
}), new CopyWebpackPlugin(copyPlugin()), new webpack.optimize.AggressiveMergingPlugin({
  minSizeReduce: 1.5,
  moveToParents: true
}), new webpack.optimize.ModuleConcatenationPlugin()];

module.exports = ifDev(initialPlugins);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsdWdpbnMuanMiXSwibmFtZXMiOlsicGF0aCIsInJlcXVpcmUiLCJ3ZWJwYWNrIiwiU3RhdGljU2l0ZUdlbmVyYXRvclBsdWdpbiIsIkJyb3dzZXJTeW5jUGx1Z2luIiwiQ2xlYW5XZWJwYWNrUGx1Z2luIiwiQ29weVdlYnBhY2tQbHVnaW4iLCJCdW5kbGVBbmFseXplclBsdWdpbiIsInNzIiwib3V0cHV0RGlyIiwicHJvY2VzcyIsImVudiIsIk9VVFBVVCIsImNvcHlQbHVnaW4iLCJjb3B5SFRNTCIsImZyb20iLCJST09UX1BBVEgiLCJ0byIsImNvbmNhdCIsImlmRGV2IiwiYXJyIiwicGx1Z2lucyIsIlN0YXRpY1NpdGVHZW5lcmF0b3IiLCJlbnRyeSIsInBhdGhzIiwicm91dGVzIiwic3BsaWNlIiwiTk9ERV9FTlYiLCJVZ2x5SlMiLCJvcHRpbWl6ZSIsIlVnbGlmeUpzUGx1Z2luIiwibWluaW1pemUiLCJjb21tZW50cyIsImNvbXByZXNzIiwid2FybmluZ3MiLCJwdXJlX2dldHRlcnMiLCJjb25kaXRpb25hbHMiLCJzZXF1ZW5jZXMiLCJkZWFkX2NvZGUiLCJib29sZWFucyIsInVudXNlZCIsImlmX3JldHVybiIsImpvaW5fdmFycyIsImRyb3BfY29uc29sZSIsIm1hbmdsZSIsInNvdXJjZU1hcCIsIm91dHB1dCIsIklnbm9yZVBsdWdpbiIsIk5hbWVNb2R1bGVzIiwiTmFtZWRNb2R1bGVzUGx1Z2luIiwiTm9FbWl0IiwiTm9FbWl0T25FcnJvcnNQbHVnaW4iLCJCcm93c2VyU3luYyIsImhvc3QiLCJwb3J0IiwiUE9SVCIsInNlcnZlciIsImJhc2VEaXIiLCJCdW5kbGVBbmFseXNlciIsImluaXRpYWxQbHVnaW5zIiwicm9vdCIsInJlc29sdmUiLCJfX2Rpcm5hbWUiLCJBZ2dyZXNzaXZlTWVyZ2luZ1BsdWdpbiIsIm1pblNpemVSZWR1Y2UiLCJtb3ZlVG9QYXJlbnRzIiwiTW9kdWxlQ29uY2F0ZW5hdGlvblBsdWdpbiIsIm1vZHVsZSIsImV4cG9y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LFdBRGtDO0FBRXhDQyxZQUFNNUMsUUFBUUMsR0FBUixDQUFZNEMsSUFBWixJQUFvQixJQUZjO0FBR3hDQyxjQUFRO0FBQ05DLGlCQUFTLENBQUloRCxTQUFKO0FBREg7QUFIZ0MsS0FBdEIsQ0FBcEI7QUFPQSxRQUFNaUQsaUJBQWlCLElBQUluRCxvQkFBSixFQUF2QjtBQUNBYyxjQUFVQSxRQUFRSCxNQUFSLENBQWVrQyxXQUFmLEVBQTRCTSxjQUE1QixDQUFWO0FBQ0Q7QUFDRCxTQUFPckMsT0FBUDtBQUNELENBaEREOztBQWtEQSxJQUFNc0MsaUJBQWlCLENBQ3JCLElBQUl0RCxrQkFBSixDQUF1QixDQUFJSSxTQUFKLFlBQXZCLEVBQStDO0FBQzdDbUQsUUFBTTVELEtBQUs2RCxPQUFMLENBQWFDLFNBQWIsRUFBd0IsUUFBeEI7QUFEdUMsQ0FBL0MsQ0FEcUIsRUFJckIsSUFBSXhELGlCQUFKLENBQXNCTyxZQUF0QixDQUpxQixFQUtyQixJQUFJWCxRQUFRMkIsUUFBUixDQUFpQmtDLHVCQUFyQixDQUE2QztBQUMzQ0MsaUJBQWUsR0FENEI7QUFFM0NDLGlCQUFlO0FBRjRCLENBQTdDLENBTHFCLEVBU3JCLElBQUkvRCxRQUFRMkIsUUFBUixDQUFpQnFDLHlCQUFyQixFQVRxQixDQUF2Qjs7QUFZQUMsT0FBT0MsT0FBUCxHQUFpQmpELE1BQU13QyxjQUFOLENBQWpCIiwiZmlsZSI6InBsdWdpbnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3Qgd2VicGFjayA9IHJlcXVpcmUoJ3dlYnBhY2snKTtcbmNvbnN0IFN0YXRpY1NpdGVHZW5lcmF0b3JQbHVnaW4gPSByZXF1aXJlKCdzdGF0aWMtc2l0ZS1nZW5lcmF0b3Itd2VicGFjay1wbHVnaW4nKTtcbmNvbnN0IEJyb3dzZXJTeW5jUGx1Z2luID0gcmVxdWlyZSgnYnJvd3Nlci1zeW5jLXdlYnBhY2stcGx1Z2luJyk7XG5jb25zdCBDbGVhbldlYnBhY2tQbHVnaW4gPSByZXF1aXJlKCdjbGVhbi13ZWJwYWNrLXBsdWdpbicpO1xuY29uc3QgQ29weVdlYnBhY2tQbHVnaW4gPSByZXF1aXJlKCdjb3B5LXdlYnBhY2stcGx1Z2luJyk7XG5jb25zdCB7QnVuZGxlQW5hbHl6ZXJQbHVnaW59ID0gcmVxdWlyZSgnd2VicGFjay1idW5kbGUtYW5hbHl6ZXInKTtcbmNvbnN0IHNzID0gcmVxdWlyZSgnLi4vLi4vc3JjL19fc3RhdGljX18vc3Nfcm91dGVzJyk7XG5cbmNvbnN0IG91dHB1dERpciA9IHByb2Nlc3MuZW52Lk9VVFBVVDtcblxuY29uc3QgY29weVBsdWdpbiA9ICgpID0+IHtcbiAgbGV0IGNvcHlIVE1MID0gW1xuICAgIHtcbiAgICAgIGZyb206IGAke3Byb2Nlc3MuZW52LlJPT1RfUEFUSH1zcmMvYXNzZXRzL2AsXG4gICAgICB0bzogYCR7cHJvY2Vzcy5lbnYuUk9PVF9QQVRIfWFzc2V0cy9gXG4gICAgfVxuICBdO1xuICBpZiAocHJvY2Vzcy5lbnYuT1VUUFVUID09PSAnc3RhbmRhcmQnKSB7XG4gICAgY29weUhUTUwgPSBjb3B5SFRNTC5jb25jYXQoe1xuICAgICAgZnJvbTogYCR7cHJvY2Vzcy5lbnYuUk9PVF9QQVRIfXNyYy9fXyR7b3V0cHV0RGlyfV9fL2luZGV4Lmh0bWxgLFxuICAgICAgdG86IGAke3Byb2Nlc3MuZW52LlJPT1RfUEFUSH1gXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGNvcHlIVE1MO1xufTtcblxuY29uc3QgaWZEZXYgPSAoYXJyKSA9PiB7XG4gIGxldCBwbHVnaW5zID0gYXJyO1xuICBpZiAocHJvY2Vzcy5lbnYuT1VUUFVUID09PSAnc3RhdGljJykge1xuICAgIGNvbnN0IFN0YXRpY1NpdGVHZW5lcmF0b3IgPSBuZXcgU3RhdGljU2l0ZUdlbmVyYXRvclBsdWdpbih7XG4gICAgICBlbnRyeTogJ21haW4nLFxuICAgICAgcGF0aHM6IHNzLnJvdXRlc1xuICAgIH0pO1xuICAgIHBsdWdpbnMuc3BsaWNlKDIsIDAsIFN0YXRpY1NpdGVHZW5lcmF0b3IpO1xuICB9XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgY29uc3QgVWdseUpTID0gbmV3IHdlYnBhY2sub3B0aW1pemUuVWdsaWZ5SnNQbHVnaW4oe1xuICAgICAgbWluaW1pemU6IHRydWUsXG4gICAgICBjb21tZW50czogZmFsc2UsIC8vIHJlbW92ZSBjb21tZW50c1xuICAgICAgY29tcHJlc3M6IHtcbiAgICAgICAgd2FybmluZ3M6IGZhbHNlLCAvLyBTdXBwcmVzcyB1Z2xpZmljYXRpb24gd2FybmluZ3NcbiAgICAgICAgcHVyZV9nZXR0ZXJzOiB0cnVlLFxuICAgICAgICBjb25kaXRpb25hbHM6IHRydWUsXG4gICAgICAgIHNlcXVlbmNlczogdHJ1ZSxcbiAgICAgICAgZGVhZF9jb2RlOiB0cnVlLFxuICAgICAgICBib29sZWFuczogdHJ1ZSxcbiAgICAgICAgdW51c2VkOiB0cnVlLFxuICAgICAgICBpZl9yZXR1cm46IHRydWUsXG4gICAgICAgIGpvaW5fdmFyczogdHJ1ZSxcbiAgICAgICAgZHJvcF9jb25zb2xlOiB0cnVlXG4gICAgICB9LFxuICAgICAgbWFuZ2xlOiB0cnVlLFxuICAgICAgc291cmNlTWFwOiB0cnVlLCAvKiBmaXggaXNzdWUgb24gdWdsaWZ5ICovXG4gICAgICBvdXRwdXQ6IHtjb21tZW50czogZmFsc2V9XG4gICAgfSk7XG4gICAgY29uc3QgSWdub3JlUGx1Z2luID0gbmV3IHdlYnBhY2suSWdub3JlUGx1Z2luKC9eXFwuXFwvbG9jYWxlJC8sIFsvbW9tZW50JC9dKTtcbiAgICBjb25zdCBOYW1lTW9kdWxlcyA9IG5ldyB3ZWJwYWNrLk5hbWVkTW9kdWxlc1BsdWdpbigpO1xuICAgIGNvbnN0IE5vRW1pdCA9IG5ldyB3ZWJwYWNrLk5vRW1pdE9uRXJyb3JzUGx1Z2luKCk7XG5cbiAgICBwbHVnaW5zLnNwbGljZSgyLCAwLCBVZ2x5SlMpO1xuICAgIHBsdWdpbnMgPSBwbHVnaW5zLmNvbmNhdChJZ25vcmVQbHVnaW4sIE5hbWVNb2R1bGVzLCBOb0VtaXQpO1xuICB9XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50Jykge1xuICAgIGNvbnN0IEJyb3dzZXJTeW5jID0gbmV3IEJyb3dzZXJTeW5jUGx1Z2luKHtcbiAgICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgICAgcG9ydDogcHJvY2Vzcy5lbnYuUE9SVCB8fCA4MDgwLFxuICAgICAgc2VydmVyOiB7XG4gICAgICAgIGJhc2VEaXI6IFtgJHtvdXRwdXREaXJ9X2J1aWxkYF1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBCdW5kbGVBbmFseXNlciA9IG5ldyBCdW5kbGVBbmFseXplclBsdWdpbigpO1xuICAgIHBsdWdpbnMgPSBwbHVnaW5zLmNvbmNhdChCcm93c2VyU3luYywgQnVuZGxlQW5hbHlzZXIpO1xuICB9XG4gIHJldHVybiBwbHVnaW5zO1xufTtcblxuY29uc3QgaW5pdGlhbFBsdWdpbnMgPSBbXG4gIG5ldyBDbGVhbldlYnBhY2tQbHVnaW4oW2Ake291dHB1dERpcn1fYnVpbGRgXSwge1xuICAgIHJvb3Q6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8uLi8nKVxuICB9KSxcbiAgbmV3IENvcHlXZWJwYWNrUGx1Z2luKGNvcHlQbHVnaW4oKSksXG4gIG5ldyB3ZWJwYWNrLm9wdGltaXplLkFnZ3Jlc3NpdmVNZXJnaW5nUGx1Z2luKHtcbiAgICBtaW5TaXplUmVkdWNlOiAxLjUsXG4gICAgbW92ZVRvUGFyZW50czogdHJ1ZVxuICB9KSxcbiAgbmV3IHdlYnBhY2sub3B0aW1pemUuTW9kdWxlQ29uY2F0ZW5hdGlvblBsdWdpbigpXG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlmRGV2KGluaXRpYWxQbHVnaW5zKTtcbiJdfQ==